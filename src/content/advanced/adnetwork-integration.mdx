---
sidebarTitle: Ad Network Integration
---

import { Callout } from "nextra/components";
import UserTable from "@components/TableComponent";

# Ad Network Integration

After uploading your game to the platform, when you select an ad network and start downloading the desired version, the necessary components are automatically injected into your game project. This ensures that the correct ad SDK is integrated without requiring any manual setup.

### Ending the game

Certain functions still need to be triggered manually from within the game. For example, when the game ends or the player can no longer interact with the game, you must explicitly call:

```ts
//...
import {  gameFinished } from "utils";
gameFinished(true); //true means the player won the game or reached the goal
```

This is usually done in the endcard scene.

### Redirecting the user to the market

For redirecting the user to the market, you must call `redirectToStore()`. This will redirect the user to the store page.

```ts
import { redirectToStore } from "utils";
redirectToStore();
```

### Redirecting the user to the market with a condition

If your game has specialized market send options, you must call both functions. Example scenario:
The player collected x amount of money and you want to send them to the market.

```ts
//...
if (player.money >= reqMoneyAmount) {
  globals.end(true); // end the game if this is the main goal of the current version scenario
  redirectToStore(); // opens the market link
}
```

<Callout type="info">
  Do not call `redirectToStore()` in update without a flag. Opening the
  market link multiple times simultaneously is not intended behavior.
</Callout>

### Default Market Params

When creating playable ads, the platform provides several built-in parameters that control market behavior and user interactions. These parameters can be configured through the DataJS system and are automatically available in your game logic.

<UserTable
  data={[
    {
      name: "gotoMarketClickNum",
      desc: "Controls how many clicks are required before automatically directing the user to the market. Set to 0 to disable click-based market redirection. Range: 0-30 clicks.",
    },
    {
      name: "gotoMarketAfterTime",
      desc: "Time in seconds after which the user will be automatically directed to the market. Set to 0 to disable time-based market redirection. Range: 0-60 seconds.",
    },
    {
      name: "gotoMarketOnce",
      desc: "Boolean flag that determines if the market should only be opened once during the entire game session. When true, subsequent automatic market calls will be ignored.",
    },
    {
      name: "endCardFullScreenClick",
      desc: "Boolean flag that enables clicking anywhere on the EndCard screen to direct the user to the market. When enabled, the entire EndCard becomes a clickable area. Requires globals.end to be called.",
    },
    {
      name: "goToMarketDirectly",
      desc: "Boolean flag that immediately redirects the user to the market when the EndCard stage is reached, without requiring any user interaction. Requires globals.end to be called.",
    },
  ]}
/>

<Callout type="info">
  These are default market options. Implementations are already done. For some, you
  need to call globals.end.
</Callout>
